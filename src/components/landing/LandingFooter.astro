---
import { localizedPath } from "../../lib/i18n";
import type { Lang, Translations } from "../../lib/i18n";

interface Props {
  lang: Lang;
  footer: Translations["footer"];
  navbar: Translations["navbar"];
}

const { lang, footer, navbar } = Astro.props;
const currentYear = new Date().getFullYear();

const productLinks = [
  { name: footer.product.features, href: localizedPath(lang, "/products") },
  { name: footer.product.integrations, href: localizedPath(lang, "/products") },
];

const companyLinks = [
  { name: footer.company.about, href: localizedPath(lang, "/about") },
  { name: navbar.contact, href: localizedPath(lang, "/contact") },
];

const legalLinks = [
  { name: footer.legal.privacy, href: localizedPath(lang, "/privacy") },
  { name: footer.legal.terms, href: localizedPath(lang, "/terms") },
];
---

<footer class="w-full border-t border-border/50 bg-background">
  <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-4">
      <!-- Brand -->
      <div class="flex flex-col gap-4">
        <a href={localizedPath(lang, "/")} class="flex items-center gap-2">
          <img src="/logo-light.png" alt="Ayova" class="block h-8 w-auto rounded-none dark:hidden" />
          <img src="/logo-dark.png" alt="Ayova" class="hidden h-8 w-auto rounded-none dark:block" />
        </a>
        <p class="text-sm text-muted-foreground leading-relaxed">
          {footer.tagline}
        </p>
      </div>

      <!-- Product -->
      <div>
        <h3 class="mb-4 text-sm font-semibold text-foreground">{footer.product.title}</h3>
        <ul class="flex flex-col gap-3">
          {productLinks.map((link) => (
            <li>
              <a href={link.href} class="text-sm text-muted-foreground transition-colors hover:text-foreground">
                {link.name}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Company -->
      <div>
        <h3 class="mb-4 text-sm font-semibold text-foreground">{footer.company.title}</h3>
        <ul class="flex flex-col gap-3">
          {companyLinks.map((link) => (
            <li>
              <a href={link.href} class="text-sm text-muted-foreground transition-colors hover:text-foreground">
                {link.name}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Legal -->
      <div>
        <h3 class="mb-4 text-sm font-semibold text-foreground">{footer.legal.title}</h3>
        <ul class="flex flex-col gap-3">
          {legalLinks.map((link) => (
            <li>
              <a href={link.href} class="text-sm text-muted-foreground transition-colors hover:text-foreground">
                {link.name}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </div>

    <div class="mt-12 border-t border-border/50 pt-8">
      <p class="text-center text-sm text-muted-foreground">
        {footer.copyright.replace('{year}', String(currentYear))}
      </p>
    </div>
  </div>
</footer>
